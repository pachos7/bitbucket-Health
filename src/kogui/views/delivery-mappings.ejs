<% include ./head %>
<body>
<% include ./header %>
<main role="main" class="col-sm-9 ml-sm-auto col-md-10 pt-3">
    <% if (deliveryMappingList == null) { %>
      <div class="alert alert-info" role="alert">No delivey mappings found</div>
    <% } else {  %>
      <h3>ASCEND Delivery Mappings</h3>
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-sm" id="dataTable" width="100%" cellspacing="0">
              <thead class="thead-light">
              <tr>
                <th>#</th>
                <th>Client</th>
                <th>Environment</th>
                <th>Delivery Method</th>
                <th>Destination Location</th>
                <th>STS Intermediate S3 path</th>
                <th>Profile Name</th>
                <th>DSN Name</th>
              </tr>
              </thead>
              <tbody>

            <% deliveryMappingList.forEach(function(clientMapping, i) {
                clientMapping.ASCEND_DELIVERY_MAPPING.forEach(function(deliveryMapping) { %>
                <tr>
                  <td><%= i + 1 %></td>
                  <td><a href="/client/details/<% if (clientMapping.ENVIRONMENT == 'UAT') {%>[UAT]<%}%><%= clientMapping.CLIENT_NAME %>"><%= clientMapping.CLIENT_NAME %></a></td>
                  <td><%= clientMapping.ENVIRONMENT %></td>
                  <td><%= deliveryMapping.DELIVER_METHOD %></td>
                  <td><%= deliveryMapping.DESTINATION_LOCATION %></td>
                  <td><%= deliveryMapping.STS_INTERMEDIATE_S3_PATH %></td>
                  <td><%= deliveryMapping.PROFILE_NAME %></td>
                  <td><%= deliveryMapping.DSN_NAME %></td>
                </tr>
                 <% });  
               }); %>
              </tbody>
            </table>            
          </div>
        </div>
      </div>
      <% } %>
  </main>
<% include ./footer %>
</body>
</html>